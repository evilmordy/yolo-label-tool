# YOLO 标注工具 (YOLOTxtMaker)

一个功能完整的YOLO数据集标注工具，提供直观的GUI界面用于创建和编辑YOLO格式的标注文件。


注意：打开图片前**必须先设置保存路径**，否则无法进行标注操作。
## 使用
### linux以外的用户：
git clone项目到本地，然后安装这两个库：pyqt5,pillow.
直接运行main.py即可。
### Linux
在release中下载YOLOTxtMaker-linux，运行它。
这里默认大家都会chmod +x 来使得可执行文件具有执行权限。不会的话，你应该了解linux的基础知识。
## 功能特性

### 📷 图片管理
- ✅ 支持打开单张图片（`.jpg`, `.png`, `.jpeg`, `.bmp`）
- ✅ 支持打开整个文件夹进行批量标注
- ✅ "上一张"和"下一张"按钮快速浏览图片
- ✅ 图片计数器显示当前进度（如 `3/10`）
- ✅ 切换图片时自动保存前一张的标注

### 🎯 BBox标注
- ✅ 新增BBox（自动居中于图像）
- ✅ 删除选中的BBox
- ✅ 8个拉伸控制点（4个角 + 4条边）
- ✅ 鼠标悬停时控制点高亮显示
- ✅ 拖拽移动BBox
- ✅ **严格边界检查** - BBox永远不会超出图像范围

### 🏷️ 标签管理
- ✅ 修改Class ID（通过右侧SpinBox）
- ✅ 列表显示：`IDx | Class: y`
- ✅ 点击列表项选中对应BBox
- ✅ 点击图像中的BBox自动同步到列表
- ✅ 单选模式：同时只有一个BBox为紫色

### 💾 保存和加载
- ✅ **必须先设置保存路径** 才能打开图片
- ✅ 自动加载对应的`.txt`标注文件
- ✅ 手动保存或自动保存（切换图片时）
- ✅ **严格符合YOLO格式**：`class_id x_center y_center width height`


## YOLO格式规范

### 文件格式
```
<class_id> <x_center> <y_center> <width> <height>
```

### 参数说明
| 参数 | 类型 | 范围 | 说明 |
|------|------|------|------|
| class_id | 整数 | 0+ | 类别ID，从0开始 |
| x_center | 浮点 | 0-1 | 框中心X相对坐标 |
| y_center | 浮点 | 0-1 | 框中心Y相对坐标 |
| width | 浮点 | 0-1 | 框宽度相对值 |
| height | 浮点 | 0-1 | 框高度相对值 |



2. **设置保存路径**
   - 点击右侧面板的"设置保存路径"按钮
   - 选择一个文件夹（标注文件将保存到此处）

3. **打开图片**
   - 方式1：菜单 → 文件 → "打开单张图片"
   - 方式2：菜单 → 文件 → "打开文件夹"（推荐批量标注）

4. **标注图片**
   - 点击"新添 BBox"创建新的标注框
   - 拖拽移动标注框
   - 拉动8个控制点来调整大小
   - 在右侧修改Class ID

5. **浏览和保存**
   - 点击"上一张"/"下一张"浏览图片
   - 自动保存到保存路径
   - 或点击"保存 YOLO txt"手动保存

## 项目结构

```
YOLOTxtMaker/
├── main.py                 # 程序入口
├── core/
│   ├── bbox.py            # BBox数据类
│   ├── label_manager.py   # 标注管理器
│   └── yolo_io.py         # YOLO格式读写
├── ui/
│   ├── main_window.py     # 主窗口
│   ├── image_view.py      # 图像视图
│   └── bbox_item.py       # BBox图形项
├── utils/
│   └── image_loader.py    # 图像加载
└── resources/
    └── style.qss          # 样式
```

## 技术栈

- **PyQt5** - GUI框架
- **Python 3.10+** - 编程语言
- **QGraphics** - 图形渲染

## 快捷操作

| 操作 | 说明 |
|------|------|
| 拖拽BBox | 移动位置（自动限制在图像内） |
| 拉伸控制点 | 调整大小（自动限制在图像内） |
| 点击列表项 | 在图像中高亮对应BBox |
| Class ID修改 | 实时更新选中BBox的类别 |

## 颜色说明

| 颜色 | 含义 |
|------|------|
| 紫色（Magenta） | 在列表里选中的BBox |
| 蓝色（Blue） | 未在列表里选中的BBox |
| 黄色（Yellow） | 鼠标悬停的控制点 |
| 白色 | 普通控制点 |


## 问题反馈

如遇问题，请检查：
1. 是否正确设置了保存路径
2. 图片格式是否为支持的格式
3. 标注文件是否有读写权限
